'use strict';

/*!
 * ignore
 */

module.exports = function addIdGetter(schema) {
  // ensure the documents receive an id getter unless disabled
  const autoIdGetter = !schema.paths['id'] &&
    schema.paths['_id'] &&
    schema.options.id;
  if (!autoIdGetter) {
    return schema;
  }
  if (schema.aliases && schema.aliases.id) {
    return schema;
  }
  schema.virtual('id').get(idGetter);
<<<<<<< HEAD
=======
  schema.virtual('id').set(idSetter);
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed

  return schema;
};

/**
 * Returns this documents _id cast to a string.
 * @api private
 */

function idGetter() {
  if (this._id != null) {
<<<<<<< HEAD
    return this._id.toString();
=======
    return String(this._id);
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed
  }

  return null;
}
<<<<<<< HEAD
=======

/**
 *
 * @param {String} v the id to set
 * @api private
 */

function idSetter(v) {
  this._id = v;
  return v;
}
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed

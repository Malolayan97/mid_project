import * as defaultOperations from "./operations";
import {
  Query,
  QueryOperators,
  BasicValueQuery,
  ArrayValueQuery,
  ValueQuery,
  NestedQuery,
  ShapeQuery,
  Options,
  createQueryTester,
  EqualsOperation,
  createQueryOperation,
  createEqualsOperation,
<<<<<<< HEAD
  createOperationTester,
=======
  createOperationTester
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed
} from "./core";

const createDefaultQueryOperation = <TItem, TSchema extends TItem = TItem>(
  query: Query<TSchema>,
  ownerQuery: any,
<<<<<<< HEAD
  { compare, operations }: Partial<Options> = {},
) => {
  return createQueryOperation(query, ownerQuery, {
    compare,
    operations: Object.assign({}, defaultOperations, operations || {}),
=======
  { compare, operations }: Partial<Options> = {}
) => {
  return createQueryOperation(query, ownerQuery, {
    compare,
    operations: Object.assign({}, defaultOperations, operations || {})
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed
  });
};

const createDefaultQueryTester = <TItem, TSchema extends TItem = TItem>(
  query: Query<TSchema>,
<<<<<<< HEAD
  options: Partial<Options> = {},
=======
  options: Partial<Options> = {}
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed
) => {
  const op = createDefaultQueryOperation(query, null, options);
  return createOperationTester(op);
};

export {
  Query,
  QueryOperators,
  BasicValueQuery,
  ArrayValueQuery,
  ValueQuery,
  NestedQuery,
  ShapeQuery,
  EqualsOperation,
  createQueryTester,
  createOperationTester,
  createDefaultQueryOperation,
  createEqualsOperation,
<<<<<<< HEAD
  createQueryOperation,
=======
  createQueryOperation
>>>>>>> 454aa3e244e0a08f5f06df8800df184cf5ac67ed
};
export * from "./operations";

export default createDefaultQueryTester;
